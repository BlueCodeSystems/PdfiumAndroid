jdk:
  - openjdk17

before_install:
  # Ensure Android SDK is writable and licensed, then install required components
  - echo "sdk.dir=$ANDROID_HOME" > local.properties
  - yes | ${ANDROID_HOME}/cmdline-tools/latest/bin/sdkmanager --licenses > /dev/null || true
  - ${ANDROID_HOME}/cmdline-tools/latest/bin/sdkmanager "platforms;android-35" "build-tools;35.0.0" "ndk;26.2.11394342"

install:
  # Publish to Maven Local so JitPack can find POM/artifacts
  # Derive GROUP from repo owner and skip signing for JitPack
  - OWNER=$(git config --get remote.origin.url | sed -E 's#.*[:/ ]([^/]+)/[^/]+(\.git)?$#\1#'); echo "Using GROUP=com.github.${OWNER} VERSION=${VERSION} (skipSigning)"
  - ./gradlew --no-daemon -x test -x lint -PskipSigning=true -PGROUP=com.github.${OWNER} -PVERSION_NAME=${VERSION} publishToMavenLocal
